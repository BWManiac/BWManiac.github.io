<!DOCTYPE html>
<html>

<head>
    <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase-firestore.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css?family=Dosis|Muli" rel="stylesheet">

</head>

<body>
    <div class="topnav content">
        <a href="./home.html">Home</a>
        <a href="./challenges.html">Challenges</a>
        <a href="./achievements.html">Achievements</a>
        <a href="./statistics.html">Statistics</a>
    </div>
    <h1>
        ACHIEVEMENTS

    </h1>


    <div class="content">
        <h2>Achievements</h2>
        <table style="width:100%">
            <tr>
                <th align="left">Achievement</th>
                <th align="left">Unlocked?</th>
            </tr>
            <tr>
                <td>Run 3 miles</td>
                <td id="threeMiles">x</td>
            </tr>
            <tr>
                <td>Run 5 miles</td>
                <td id="fiveMiles">x</td>
            </tr>
        </table>
    </div>




    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyDzTXkKSV00p8ZGuuGM4IBqY4ovK_T74bQ",
            authDomain: "head-start-1b436.firebaseapp.com",
            databaseURL: "https://head-start-1b436.firebaseio.com",
            projectId: "head-start-1b436",
            storageBucket: "head-start-1b436.appspot.com",
            messagingSenderId: "196160571499"

        };
        firebase.initializeApp(config);
        const db = firebase.firestore();
        db.settings({ timestampsInSnapshots: true }); 
    </script>



    <script>
            const threeMiles = document.querySelector('#threeMiles');
            const fiveMiles = document.querySelector('#fiveMiles');

            let TotalMiles = 0;
            let TotalTime = 0;

            window.onload = function () {
//                alert("Hello! I am an alert box!!");
                updateAchievements();
                
            }

            function updateAchievements() {
                TotalMiles = 0;
                TotalTime = 0;

                db.collection('cafes').get().then((snapshot) => {
                    snapshot.docs.forEach(doc => {
                        TotalMiles += Number(doc.data().name);
                        TotalTime += Number(doc.data().city);
                        if (TotalMiles >= 3) {
                            threeMiles.innerText = "unlocked!";
                        }
                        console.log(TotalMiles);

                        if (TotalMiles  >= 5) {
                            fiveMiles.innerText = "unlocked!";
                        }
                    })
                })
            }
        
    </script>

</body>

</html>